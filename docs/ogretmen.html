<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Kelime AvÄ± - Ã–ÄŸretmen</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase.js"></script>

<style>
body{
  font-family:Arial;
  background:#eee;
  padding:20px;
}

.card{
  background:white;
  padding:10px;
  margin:10px;
  border-radius:6px;
}

button{
  padding:8px;
  margin:5px;
}
</style>
</head>

<body>

<h1>ðŸ“˜ Ã–ÄŸretmen Paneli</h1>

<button onclick="oyunuBaslat()">ðŸŽ® Oyunu BaÅŸlat</button>
<button onclick="oyunuBitir()">â›” Oyunu Bitir</button>

<hr>

<h3>Bekleyen Ã–ÄŸrenciler</h3>
<div id="bekleyen"></div>

<h3>Onaylananlar</h3>
<div id="onayli"></div>

<script>

// Firebase AyarlarÄ±
var firebaseConfig = {
  apiKey: "AIzaSyBwzlkq9LZYCM_sk_M6tKfx5jme37Zw0u4",
  authDomain: "kelime-avi-bec9f.firebaseapp.com",
  databaseURL: "https://kelime-avi-bec9f-default-rtdb.firebaseio.com",
  projectId: "kelime-avi-bec9f",
  storageBucket: "kelime-avi-bec9f.firebasestorage.app",
  messagingSenderId: "154681825331",
  appId: "1:154681825331:web:7c8fec41e0d8ee2664eb46"
};

firebase.initializeApp(firebaseConfig);

var db = firebase.database();

var bekleyen = document.getElementById("bekleyen");
var onayli = document.getElementById("onayli");


// Ã–ÄŸrencileri Dinle
db.ref("ogrenciler").on("value", function(snap){

  bekleyen.innerHTML="";
  onayli.innerHTML="";

  var data = snap.val();
  if(!data) return;

  for(var id in data){

    var o = data[id];

    var div = document.createElement("div");
    div.className="card";

    div.innerHTML = o.ad+" | Puan: "+o.puan;

    if(o.onayli){

      onayli.appendChild(div);

    }else{

      var btn = document.createElement("button");
      btn.innerText="Onayla";

      btn.onclick = function(i){

        return function(){

          db.ref("ogrenciler/"+i).update({
            onayli:true
          });

        };

      }(id);

      div.appendChild(btn);
      bekleyen.appendChild(div);
    }

  }

});


// Oyunu BaÅŸlat
function oyunuBaslat(){

  db.ref("oyun").set({
    basladi:true
  });

  alert("Oyun baÅŸladÄ±!");
}


// Oyunu Bitir
function oyunuBitir(){

  db.ref("oyun").set({
    basladi:false
  });

  alert("Oyun bitti!");
}

</script>

</body>
</html>
