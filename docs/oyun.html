<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Kelime AvÄ± - YarÄ±ÅŸma</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: sans-serif; text-align: center; background: #eef2f3; padding-top: 50px; }
        .game-card { background: white; padding: 30px; display: inline-block; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 85%; max-width: 600px; }
        #kelime { font-size: 45px; letter-spacing: 15px; margin: 30px 0; font-family: 'Courier New', monospace; color: #2c3e50; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        input { padding: 15px; font-size: 20px; width: 80%; border: 2px solid #3498db; border-radius: 10px; margin-bottom: 10px; text-align: center; }
        button { padding: 15px 40px; font-size: 20px; background: #3498db; color: white; border: none; border-radius: 10px; cursor: pointer; }
        button:disabled { background: #bdc3c7; cursor: not-allowed; }
        #mesaj { margin-top: 20px; font-size: 18px; font-weight: bold; color: #7f8c8d; }
    </style>
</head>
<body>
    <div class="game-card">
        <h1>ğŸ¯ Kelime AvÄ±</h1>
        <p><strong>Ä°pucu:</strong> <span id="anlam">Bekleniyor...</span></p>
        <div id="kelime">----</div>
        <input id="tahmin" placeholder="Tahmininizi yazÄ±n...">
        <br>
        <button id="btnGonder" onclick="gonder()">GÃ¶nder</button>
        <p id="mesaj">CevabÄ±nÄ± yaz ve gÃ¶nder!</p>
    </div>

    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyBwzlkq9LZYCM_sk_M6tKfx5jme37Zw0u4",
            authDomain: "kelime-avi-bec9f.firebaseapp.com",
            databaseURL: "https://kelime-avi-bec9f-default-rtdb.firebaseio.com",
            projectId: "kelime-avi-bec9f",
            storageBucket: "kelime-avi-bec9f.appspot.com",
            messagingSenderId: "154681825331",
            appId: "1:154681825331:web:7c8fec41e0d8ee2664eb46"
        };
        firebase.initializeApp(firebaseConfig);
        var db = firebase.database();
        
        var ogrenciID = localStorage.getItem("id");
        var mevcutKelime = "";
        var canliPuan = 0;

        // Oyun kapatÄ±ldÄ±ÄŸÄ±nda giriÅŸ sayfasÄ±na yÃ¶nlendir
        db.ref("oyunDurum").on("value", function(d){
            if(d.val() == "kapali") window.location.href = "index.html";
        });

        db.ref("aktif").on("value", function(s){
            var d = s.val();
            if(!d) return;
            if(mevcutKelime !== d.kelime){
                mevcutKelime = d.kelime;
                document.getElementById("tahmin").disabled = false;
                document.getElementById("btnGonder").disabled = false;
                document.getElementById("tahmin").value = "";
                document.getElementById("mesaj").innerText = "Yeni kelime geldi!";
            }
            document.getElementById("anlam").innerText = d.anlam;
            document.getElementById("kelime").innerText = d.gizli;
            canliPuan = d.puan;
        });

        function gonder(){
            var t = document.getElementById("tahmin").value.toUpperCase().trim();
            if(t == "") return;
            if(t === mevcutKelime){
                db.ref("ogrenciler/"+ogrenciID+"/puan").transaction(p => (p||0) + canliPuan);
            }
            document.getElementById("tahmin").disabled = true;
            document.getElementById("btnGonder").disabled = true;
            document.getElementById("mesaj").innerText = "âœ”ï¸ CevabÄ±n alÄ±ndÄ±.";
        }
    </script>
</body>
</html>
