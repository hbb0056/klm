// ... oyun.html içindeki db.ref("turnuva/maclar").on("value"...) kısmı
db.ref("turnuva/maclar").on("value", s => {
    if(!s.exists()) { 
        alert("Oyun bitti!"); 
        window.location.href="index.html"; 
        return; 
    }
    s.forEach(m => {
        var v = m.val();
        var katildi = false;
        if(v.tip === "savas" || v.tip === "grup") {
            if(v.skorlar && v.skorlar.hasOwnProperty(myTeam)) katildi = true;
        } else {
            if(v.p1 === myID || v.p2 === myID) katildi = true;
        }

        if(katildi && v.durum === "aktif") {
            activeID = m.key;
            document.getElementById("kelime").innerText = v.kelimeler[v.aktifRaunt].gizli;
            document.getElementById("ipucu").innerText = v.kelimeler[v.aktifRaunt].i;
            
            let p = 0;
            if(v.tip === "duello") {
                p = (v.p1 === myID) ? v.p1_skor : v.p2_skor;
            } else {
                p = v.skorlar[myTeam] || 0;
            }
            document.getElementById("skor").innerText = "Puan: " + p;
        }
    });
});
