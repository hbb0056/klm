<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Kelime AvÄ± - Oyun</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
body{
  text-align:center;
  font-family:Arial;
  background:#f5f5f5;
}

#kelime{
  font-size:40px;
  letter-spacing:10px;
}

#sure{
  font-size:20px;
  color:red;
}
</style>
</head>

<body>

<h1>ðŸŽ¯ Kelime AvÄ±</h1>

<h3>Anlam:</h3>
<p id="anlam">---</p>

<h2 id="kelime">-----</h2>

<p id="sure">SÃ¼re: 20</p>

<script>

var firebaseConfig = {
  apiKey: "AIzaSyBwzlkq9LZYCM_sk_M6tKfx5jme37Zw0u4",
  authDomain: "kelime-avi-bec9f.firebaseapp.com",
  databaseURL: "https://kelime-avi-bec9f-default-rtdb.firebaseio.com",
  projectId: "kelime-avi-bec9f",
  storageBucket: "kelime-avi-bec9f.appspot.com",
  messagingSenderId: "154681825331",
  appId: "1:154681825331:web:7c8fec41e0d8ee2664eb46"
};

firebase.initializeApp(firebaseConfig);
var db = firebase.database();

var kelime="";
var gizli="";
var sure=20;
var timer=null;


/* AKTÄ°F OYUNU DÄ°NLE */
db.ref("aktif").on("value",function(s){

  var d=s.val();

  if(!d) return;

  kelime=d.kelime;
  gizli=d.gizli;

  document.getElementById("anlam").innerText=d.anlam;
  document.getElementById("kelime").innerText=gizli;

  sure=20;

  if(timer) clearInterval(timer);

  baslat();
});


/* SAYAÃ‡ */
function baslat(){

  document.getElementById("sure").innerText="SÃ¼re: "+sure;

  timer=setInterval(function(){

    sure--;

    document.getElementById("sure").innerText="SÃ¼re: "+sure;

    if(sure<=0){

      clearInterval(timer);

      harfAc();
    }

  },1000);
}


/* HARF AÃ‡ */
function harfAc(){

  var yeni="";

  for(var i=0;i<kelime.length;i++){

    if(gizli[i]=="-"){

      yeni+=kelime[i];
      break;

    }else{

      yeni+=gizli[i];
    }
  }

  for(var j=yeni.length;j<kelime.length;j++){
    yeni+="-";
  }

  gizli=yeni;

  document.getElementById("kelime").innerText=gizli;

  db.ref("aktif/gizli").set(gizli);

  if(gizli.indexOf("-")!=-1){

    sure=20;
    baslat();
  }
}

</script>

</body>
</html>
