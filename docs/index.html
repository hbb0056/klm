<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Kelime AvÄ± - Ã–ÄŸrenci</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase.js"></script>

<style>
body{
  font-family:Arial;
  background:#f2f2f2;
  text-align:center;
  padding-top:60px;
}

input,button{
  padding:10px;
  margin:5px;
}
</style>
</head>

<body>

<h1>ğŸ¯ Kelime AvÄ±</h1>

<input id="ad" placeholder="AdÄ±nÄ± yaz">
<br>
<button onclick="giris()">GiriÅŸ Yap</button>

<p id="durum"></p>

<script>

// Firebase AyarlarÄ±
var firebaseConfig = {
  apiKey: "AIzaSyBwzlkq9LZYCM_sk_M6tKfx5jme37Zw0u4",
  authDomain: "kelime-avi-bec9f.firebaseapp.com",
  databaseURL: "https://kelime-avi-bec9f-default-rtdb.firebaseio.com",
  projectId: "kelime-avi-bec9f",
  storageBucket: "kelime-avi-bec9f.firebasestorage.app",
  messagingSenderId: "154681825331",
  appId: "1:154681825331:web:7c8fec41e0d8ee2664eb46"
};

firebase.initializeApp(firebaseConfig);

var db = firebase.database();

var ogrID = "";

// GiriÅŸ
function giris(){

  var ad = document.getElementById("ad").value;

  if(ad==""){
    alert("AdÄ±nÄ± yaz");
    return;
  }

  ogrID = Date.now().toString();

  db.ref("ogrenciler/"+ogrID).set({
    ad: ad,
    puan: 0,
    onayli: false
  });

  document.getElementById("durum").innerText =
  "â³ Ã–ÄŸretmen onayÄ± bekleniyor...";
}


// Durumu Dinle
setInterval(function(){

  if(ogrID=="") return;

  db.ref("ogrenciler/"+ogrID).once("value",function(snap){

    var o = snap.val();

    if(o && o.onayli){

      document.getElementById("durum").innerText =
      "âœ… OnaylandÄ±. Oyun bekleniyor...";
    }

  });

  db.ref("oyun").once("value",function(snap){

    var oyun = snap.val();

    if(oyun && oyun.basladi){

      document.getElementById("durum").innerText =
      "ğŸ‰ Oyun baÅŸladÄ±!";
    }

  });

},1000);

</script>

</body>
</html>
