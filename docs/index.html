<script>

const firebaseConfig = {
  apiKey: "AIzaSyBwzlkq9LZYCM_sk_M6tKfx5jme37Zw0u4",
  authDomain: "kelime-avi-bec9f.firebaseapp.com",
  projectId: "kelime-avi-bec9f",
  storageBucket: "kelime-avi-bec9f.firebasestorage.app",
  messagingSenderId: "154681825331",
  appId: "1:154681825331:web:7c8fec41e0d8ee2664eb46",
  databaseURL:"https://kelime-avi-bec9f-default-rtdb.firebaseio.com"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let ogrID = null;

function giris(){

  let ad = document.getElementById("ad").value;

  if(ad==""){
    alert("Ad yaz!");
    return;
  }

  ogrID = Date.now().toString();

  db.ref("ogrenciler/"+ogrID).set({
    ad:ad,
    puan:0,
    onayli:false
  });

  document.getElementById("durum").innerText =
  "â³ Ã–ÄŸretmen onayÄ± bekleniyor...";
}

/* ONAY VE OYUN DURUMUNU DÄ°NLE */

setInterval(()=>{

  if(!ogrID) return;

  db.ref("ogrenciler/"+ogrID).once("value").then(snap=>{

    let o = snap.val();

    if(!o) return;

    if(o.onayli){

      document.getElementById("durum").innerText =
      "âœ… OnaylandÄ±. Oyun bekleniyor...";
    }
  });

  db.ref("oyun").once("value").then(snap=>{

    let oyun = snap.val();

    if(oyun && oyun.basladi){

      document.getElementById("durum").innerText =
      "ğŸ‰ Oyun baÅŸladÄ±!";

    }
  });

},1000);

</script>
